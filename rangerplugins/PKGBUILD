_pkgname=rangerplugins
pkgname=$_pkgname
pkgver=20205803
pkgrel=1
pkgdesc="plugins for ranger file manager"
url="https://github.com/ranger/ranger.git"
arch=(any)
license=('MIT')
depends=('ranger')
makedepends=('git')
provides=(rangerplugins)
conflicts=(rangerplugins)

pkgver() {
    echo "$(date '+%Y%M%d')"
}

prepare() {
    echo "no prepare"
}

build() {
    echo "no build"
}

package() {
    mkdir rangerplugins
    cd rangerplugins

    mkdir -p ${pkgdir}/usr/share/rangerplugins

    installplugin() {
        git clone --depth=1 https://github.com/"$1".git
        mv "$1"/*.py .
        rm -rf "$1"/*
        mv *.py "$1"/
    }

    installplugin alexanderjeurissen/ranger_devicons
    installplugin laggardkernel/ranger-fzf-marks

    mv ./* ${pkgdir}/usr/share/rangerplugins/
}
