
pkgbase=grub-theme-live
pkgname=('grub-theme-live-common' 'grub-theme-live-instantos' 'grub-theme-instantos')
_pkgname=grub-theme-live-common
pkgver=18.1
pkgrel=1

pkgdesc='instantOS Linux grub theme'
arch=('any')
url="https://github.com/instantOS/grub-theme"
license=('GPL')
makedepends=('git')
source=("$_pkgname::git+https://github.com/instantOS/grub-theme.git")

sha256sums=('SKIP')

package_grub-theme-live-common() {
    depends=('grub')
    conflicts=('grub-theme-live' 'grub-theme-live-instantos' 'grub-theme-instantos')
    replaces=('grub-theme-live')

    cd grub-theme
    make PREFIX=/usr DESTDIR=${pkgdir} install_common
}
package_grub-theme-live-instantos() {
    depends=('grub-theme-live-common')

    cd grub-theme
    make PREFIX=/usr DESTDIR=${pkgdir} install_instantos
}

package_grub-theme-instantos() {
	depends=('grub')
	install=instantos-theme.install
    
    cd grub-theme/instantos-live
    sed -i -e 's,.*text = "Welcome to instantOS".*,#text = "Welcome to instantOS",' theme.txt #remove welcome message
    find . -type f -exec install -D -m644 {} ${pkgdir}/usr/share/grub/themes/instantos/{} \;
}
